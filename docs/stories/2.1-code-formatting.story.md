# Story 2.1: JavaScript Code Formatting in Dynamic Sections

## Story
**As a** content developer using the Dynamic Text Editor  
**I want** to automatically format JavaScript code in dynamic sections  
**So that** my code is consistently formatted, readable, and follows best practices

## Priority
**High** - Quick win that improves developer experience immediately

## Acceptance Criteria
1. **Format on Demand**: Button/keyboard shortcut (Alt+Shift+F) to format current dynamic section
2. **Auto-format Option**: Toggle setting to auto-format on save/blur  
3. **Prettier Integration**: Use Prettier with configurable options (.prettierrc support)
4. **Preserve Functionality**: Formatting must not break code execution
5. **Visual Feedback**: Show formatting status (success/error) indicator
6. **Undo Support**: Formatting action must be undoable (Ctrl+Z)

## Technical Requirements
- Integrate Prettier standalone browser build
- Store formatting preferences in localStorage
- Add format button to dynamic section toolbar
- Ensure CodeMirror integration for formatting

## Implementation Notes
- Use Prettier's browser-compatible build from CDN or bundle
- Default config: 2 spaces, single quotes, no semicolons (matching project style)
- Format only JavaScript content, not HTML sections
- Preserve cursor position after formatting

## Test Scenarios
1. Format simple JavaScript expression
2. Format complex multi-line function
3. Format code with syntax errors (should show error)
4. Undo/redo formatting operation
5. Auto-format on blur when enabled
6. Keyboard shortcut activation

## Dependencies
- Prettier standalone build
- CodeMirror 6 formatting API
- Existing dynamic section infrastructure

## MVP Scope
- Basic Prettier formatting with button trigger
- Default formatting rules
- Visual feedback on format action

## Future Enhancements
- Custom .prettierrc configuration UI
- Format selection only
- ESLint integration for code quality
- Format all sections at once option

## Story Points
**3** - Moderate complexity, well-defined scope

## Sprint Ready
âœ… Yes - All acceptance criteria defined, technical approach clear